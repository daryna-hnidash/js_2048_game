var r=document.querySelector(".game-field"),e=document.querySelector(".game-score"),t=document.querySelector(".button"),n=document.querySelector(".message-lose"),o=document.querySelector(".message-win"),i=document.querySelector(".message-start"),a=0,s=!1,f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];t.addEventListener("click",function(){if(s){for(;r.firstChild;)r.removeChild(r.firstChild);f=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o.classList.add("hidden"),n.classList.add("hidden")}i.classList.add("hidden"),c(),s=!0,t.classList.remove("start"),t.classList.add("restart"),t.textContent="Restart",a=0,e.innerText=a});var c=function(){for(var e=0;e<4;e++)for(var t=0;t<4;t++){var n=document.createElement("div");n.id="".concat(e,"-").concat(t),v(n,f[e][t]),r.append(n)}u(),u()};function d(){for(var r=0;r<4;r++)for(var e=0;e<4;e++)if(0===f[r][e])return!0;return!1}function u(){if(d())for(var r=!1;!r;){var e=Math.floor(4*Math.random()),t=Math.floor(4*Math.random()),n=Math.random()>.1?2:4;if(0===f[e][t]){f[e][t]=n;var o=document.getElementById(e.toString()+"-"+t.toString());o.innerText=n.toString(),o.classList.add("field-cell--"+n),r=!0}}}function l(r){r.toString()!==f.toString()&&(f=JSON.parse(JSON.stringify(r)),function(){for(var r=0;r<4;r++)for(var e=0;e<4;e++)v(document.getElementById(r.toString()+"-"+e.toString()),f[r][e])}(),u())}function v(r,e){r.innerText="",r.classList.value="",r.classList.add("field-cell"),e>0&&(r.innerText=e,r.classList.add("field-cell--".concat(e)))}function m(r){for(var t=r.filter(function(r){return 0!==r}),n=0;n<3;n++)t[n]===t[n+1]&&(t[n]*=2,t[n+1]=0,a+=0|+t[n],e.innerText=a);for(t=t.filter(function(r){return 0!==r&&!isNaN(r)});t.length<4;)t.push(0);return t}document.addEventListener("keyup",function(r){"ArrowLeft"===r.code&&function(){for(var r=JSON.parse(JSON.stringify(f)),e=0;e<4;e++){var t=r[e];t=m(t),r[e]=t}l(r)}(),"ArrowRight"===r.code&&function(){for(var r=JSON.parse(JSON.stringify(f)),e=0;e<4;e++){var t=r[e],n=(t=m(t=t.reverse())).reverse();r[e]=n}l(r)}(),"ArrowUp"===r.code&&function(){for(var r=JSON.parse(JSON.stringify(f)),e=0;e<4;e++){var t=[r[0][e],r[1][e],r[2][e],r[3][e]];t=m(t);for(var n=0;n<4;n++)r[n][e]=t[n]}l(r)}(),"ArrowDown"===r.code&&function(){for(var r=JSON.parse(JSON.stringify(f)),e=0;e<4;e++){var t=[r[0][e],r[1][e],r[2][e],r[3][e]];t=(t=m(t.reverse())).reverse();for(var n=0;n<4;n++)r[n][e]=t[n]}l(r)}(),function(){for(var r=0;r<4;r++)for(var e=0;e<4;e++)if(2048===f[r][e])return!0;return!1}()&&o.classList.remove("hidden"),function(){if(d())return!1;for(var r=0;r<4;r++)for(var e=0;e<3;e++)if(f[r][e]===f[r][e+1])return!1;for(var t=0;t<3;t++)for(var n=0;n<4;n++)if(f[t][n]===f[t+1][n])return!1;return!0}()&&n.classList.remove("hidden")});
//# sourceMappingURL=index.f050b7ea.js.map
